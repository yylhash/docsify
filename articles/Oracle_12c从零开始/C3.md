# 第三章 Oracle函数

## 3.1 数学函数

数学函数要用来处理数值数据，主要的数学函数有绝对值函数、 角函数（包括正弦函数、余弦函数、正切函数、余切函数等）、对数函数、随机数函数等。在有错误产生时，数学函数将会返回空值 NULL。

| 表达式                 | 作用             | 返回值                                                    |
| ---------------------- | ---------------- | --------------------------------------------------------- |
| ABS(x)                 | 绝对值函数       | 返回x的绝对值                                             |
| SQRT(x ）              | 平方根函数       | 返回 非负数 x的二次平方根                                 |
| MOD(x,y)               | 求余函数         | 返回 x被y除后的余数，                                     |
| CEIL(x ）              | 获取整数的函数   | 返回不小于x的最小整数值                                   |
| FLOOR(x)               | 获取整数的函数   | 返回不大于x的最大整数值                                   |
| DBMS_RANDOM.RANDOM     | 获取随机数的函数 | 返回一个随机值                                            |
| DBMS_RANDOM.VALUE(x,y) | 获取随机数的函数 | 返回x到y的随机值                                          |
| ROUND(x)               | 函数             | 返回最接近于参数x的整数，对x的值进行四舍五入              |
| ROUND(x,y)             | 函数             | 返回最接近于参数x的数，其值保留到小数点后面y位            |
| TRUNC(x,y)             | 函数             | 返回被舍去至小数点后y位的数字x                            |
| SIGN(x)                | 符号函数         | 返回参数的符号，x的值为负、零或正时返回结果依次为-1、0或1 |
| POWER(x,y)             | 幂运算函数       | 返回x的y次乘方的结果值                                    |
| EXP(x)                 | 幂运算函数       | 返回e的x乘方后的值                                        |

## 3.2 字符串函数

字符串函数主要用来处理数据库中的字符串数据。

| 表达式                   | 作用                   | 返回值                                                       |
| ------------------------ | ---------------------- | ------------------------------------------------------------ |
| LENGTH(str)              | 计算字符串长度         | 字符串的字节长度                                             |
| CONCAT(s1,s2)            | 合并字符串             | 链接参数产生的字符串                                         |
| INSTR(s,x)               | 字符串搜索             | 返回x字符在字符串s的位置                                     |
| LOEWER(str)              | 字母大小写转换         | 将字符串str中的字母字符全部转换为小写字母                    |
| UPPER(str)               | 字母大小写转换         | 将字符串str中的字母字符全部转换为大写字母                    |
| INITCAP(str)             | 字母大小写转换         | 将输入的字符串单词的首字母转换成大写                         |
| SUBSTR(s,m,n)            | 获取指定长度的字符串   | s代表字符串，m代表截取的位置，n代表截取的长度，m可负         |
| REPLACE(s1,s2,s3)        | 替换字符串             | s1目标 字符串，s2要搜索的字符串，s3要替换的字符串，若空则删除搜索的字符串。 |
| LTRIM(s,n)               | 删除字符串首尾指定字符 | 删除指定的左侧字符                                           |
| RTRIM(s,n)               | 删除字符串首尾指定字符 | 删除指定的右侧字符                                           |
| TRIM()                   | 删除指定字符串         | 删除指定的前缀或者后缀的字符，默认删除空格                   |
| NLS_CHARSET_ID(string)   | 字符集名称和ID互换     | 获取字符集名称对应的ID                                       |
| NLS_CHARSET_NAME(number) | 字符集名称和ID互换     | 获取字符集ID对应的名称                                       |

## 3.3 日期和时间函数

日期和时间函数主要是用来处理日期和时间值，一般的日期函数除了使用DATE类型的参数，也可以使用TIMESTAMP类型的参数，。

| 表达式                                          | 作用                           |
| ----------------------------------------------- | ------------------------------ |
| SYSDATE                                         | 获取当前日期                   |
| TO_CHAR(SYSDATE ，’'YYYY -MM-DD HH24 : MI:SS ') | 获取指定格式的系统当前日期     |
| SYSTIMESTAMP                                    | 该时间包含时区信息，精确到微秒 |
| DBTIMEZONE                                      | 数据库所在的时区               |
| SESSIONTIMEZONE                                 | 返回当前会话所在的时区         |
| LAST_DAY(date）                                 | 返回指定月份最后一天           |
| NEXT_DAY(date,char)                             | 获取指定日期向后一周的对应日期 |
| EXTRACT( datetime )                             | 从指定的时间中提取特定部分     |
| MONTHS_ BETWEEN( date1, date2)                  | 返回 date1 ate2 之间的月份数   |
|                                                 |                                |

## 3.4 转换函数

转换函数主要作用是完成不同数据类型之间的转换。

| 表达式                                     | 作用                                              |
| ------------------------------------------ | ------------------------------------------------- |
| ASCIISTR( char )                           | 将任意字符串转换为数据库字符集对应的 ASCII 字符串 |
| BIN_ TO_ NUM()                             | 实现将二进制转换成对应的十进制                    |
| CAST(expr as  type name )                  | 想把数字转换为字符或者字符转换为日期              |
| TO_CHAR (n, [fmt[nlsparam]])               | 将一 个数值型参数转换成字符型数据                 |
| TO_DATE (char [ , fmt [ , nlsparam]])      | 将一个字符型数据转换成日期型数据                  |
| TO_NUMBER ( expr [ , fmt [ , nlsparam] ] ) | 将一个字符型数据转换成数字数据                    |

## 3.5 系统信息函数

Oracle 中的系统信息函数有：返回登录名函数和返回会话以及上下文信息函数等。

| 表达式              | 作用                 |
| ------------------- | -------------------- |
| USER                | 返回当前会话的登录名 |
| USERENV (parameter) | 返回当前会话的信息   |

当参数为 Language 时， 返回会话对应的语言、字符集等；当参数为 SESSION 时，返回当 前会话的 ；当参数为 ISDBA 时，返回当前用户是否为 DBA。