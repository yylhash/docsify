# 第二章 数据类型和运算符

## 2.1 Oracle 数据类型介绍

Oracle 支持多种数据类型，主要有数值类型、日期 时间类型和字符串类型等。

1.   数值类型：包括整数类型和 数类型。
2. 日期／时间类型：包括 `DATE` 和`TIMESTAMP` 。
3. 符串类型： `CHAR`、`VARCHAR2`、`NCHAR`、`NVARCHAR2`和`LONG`包括五种。

### 2.1.1 数值类型

Oracle 的数值类 型主要通过 `number(m,n）`语句来实现 使用的语法格式如下:

```sql
number(m,n) 
```

其中， m的取值范围为 1～38， 取值范围为 -84～127。m是所有有效数字的位数， n是小数点以后的位数。

### 2.1.2 日期与时间类型

| 类型名称  | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| DATE      | 用来存储日期和时间，取值范围是公元前4712年1月1日到公元9999年12月31日 |
| TIMESTAMP | 用来存储日期和时间，与DATE类型的区别就是显示日期和时间时更精确，DATE类型的时间精确到秒，而TIMESTAMP类型可以精确到小数秒，TIMESTAMP存放日期和时间还能显示上午、下午和时区 |

### 2.1.3 字符串类型

字符串类型用来存储字符串数据。Oracle中的字符串类型指 `CHAR`、`VARCHAR2`、`NCHAR`、`NVARCHAR2`和`LONG`。

| 类型名称  | 说明                                    | 取值范围（字节） |
| --------- | --------------------------------------- | ---------------- |
| CHAR      | 用于描述定长的字符型数据                | 0~2000           |
| NCHAR     | 用来存储Unicode字符集的定长字符型数据   | 0~1000           |
| VARCHAR2  | 用于描述可变长的字符型数据              | 0~4000           |
| NVARCHAR2 | 用来存储Unicode字符集的可变长字符型数据 | 0~1000           |
| LONG      | 用来存储变长的字符串                    | 0~2 GB           |

VARCHAR2、NVARCHAR2和LONG类型是变长类型，对于其存储需求取决于列值的实际长度，而不是取决于类型的最大可能尺寸。例如，一个VARCHAR2（10）列能保存最大长度为10个字符的一个字符串，实际的存储需要是字符串的长度。

## 2.2 如何选择数据类型

1. 日期与时间类型 

   如果只需要记录日期 ，则使用DATE类型。如果需要记录日 期和时间，可以使用 TIMESTAMP 类型。特别是需要显示上午、下午或者时区时，必须使用 TIMESTAMP 类型。

2. CHAR与VARCHAR2

   CHAR 与VARCHAR2 的区别：

   - CHAR 是固定长度字符 VARCHAR2 是可变长度字符 ；
   - CHAR 会自动补齐插入数据的尾部空格，VARCHAR2 会补齐尾部空格。
   - CHAR 是固定长度 ，所以它的处理速度比VARCHAR2 的速度要快，但是它的缺点就是浪费存储空 间。
   - VARCHAR2 虽然比 CHAR 节省空间，但是如果 VARCHAR2 列经常被修改，而且每次被修改数据长度不同 会引起“行迁移”（ Row Migration ）现象， 从而造成多余 I/O,

## 2.3 常见运算符介绍

运算符连接表达式中各个操作数，其作用是用来指明对操作数所进行的运算。常见的运算有数学计算、比较运算、位运算以及逻辑运算。运用运算符可以更加灵活地使用表中的数据，常见的运算符类型有：算术运算符、比较运算符、逻辑运算符、位运算符。

### 2.3.1 运算符的概述

Oracle 的内部运算符很丰富要有 大类 ，分别是：算术运算符、较运算符、逻辑运算构、位操作运算符。

1. 算术运算符

   算术运算符用于各类数值运算，包括 （＋）、减（ -）、乘（＊） 、除 （／）。

2. 比较运算符

   比较运算符用于比较运算，包括大于（>）、小于（<）、等于（=）、大于等于（>=）、小于等于（<=）、不等于（！=），以及IN、BETWEEN AND、IS NULL、LIKE等。

3. 逻辑运算符

   逻辑运算符的求值所得结果均为1（TRUE）、0（FALSE），这类运算符有逻辑非（NOT或者！）、逻辑与（AND或者&&）、逻辑或（OR或者）、逻辑异或（XOR）。

4. 位操作运算符

   参与运算的操作数，按二进制位进行运算。这类运算符包括位与（&）、位或（）、位非（~）、位异或（A）、左移（<<）、右移（>>）6种。

### 2.3.2 算数运算符

| 运算符 | 作用             |
| ------ | ---------------- |
| +      | 加法运算         |
| -      | 减法运算         |
| *      | 乘法运算         |
| /      | 除法运算，返回商 |

### 2.3.3 比较运算符

| 运算符      | 作用                                 |
| ----------- | ------------------------------------ |
| =           | 等于                                 |
| <=>         | 安全的等于                           |
| <> (!=)     | 不等于                               |
| <=          | 小于等于                             |
| >=          | 大于等于                             |
| >           | 大于                                 |
| IS NULL     | 判断一个值是否为NULL                 |
| IS NOT NULL | 判断一个值是否不为NULL               |
| BETWEEN AND | 判断 一个值是否落在两个值之间        |
| IN          | 判断一 个值是 IN 列表中的任意一个值  |
| NOT IN      | 判断 一个值不是 IN 列表中的任意 个值 |
| LIKE        | 通配符匹配                           |

`BETWEEN...AND`运算符用于测试是否在指定的范围内。通常和WHERE字句一起使用，BETWEEN..…AND条件返回一个介于指定上限和下限之间的范围值。

`IN`运算符用来判断操作数是否为`IN`列表的一个值。

`LIKE`运算符在进行匹配时，可以使用下面两种通配符：

- “%”，用来代表由零个或者多个字符组成的任意顺序的字符串。
- “＿”，只能匹配一个字符。

### 2.3.4 逻辑运算符

| 运算符 | 作用   |
| ------ | ------ |
| NOT    | 逻辑非 |
| AND    | 逻辑与 |
| OR     | 逻辑或 |

这三个运算符的作用如下：

- NOT运算符：又称取反运算符，NOT运算符通常是单目运算符，即NOT右侧才能包含表达式，是对结果取反。
- AND运算符：对于AND运算符来说，要求两边的表达式结果都为True。
- OR运算符：又称为或运算符，也就是说左右两侧的布尔表达式任何一方为True，结果就为True。
